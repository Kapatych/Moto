(this.webpackJsonpmoto=this.webpackJsonpmoto||[]).push([[5],{100:function(e,t,r){"use strict";r.r(t);var a=r(27),n=r(28),i=r(30),c=r(29),o=r(31),l=r(0),s=r.n(l),u=r(19),m=r(15),f=r(9),p=r(22);function d(e,t){return e===t}function v(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var a=t.length,n=0;n<a;n++)if(!e(t[n],r[n]))return!1;return!0}function h(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}var g=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=0,c=a.pop(),o=h(a),l=e.apply(void 0,[function(){return i++,c.apply(null,arguments)}].concat(r)),s=e((function(){for(var e=[],t=o.length,r=0;r<t;r++)e.push(o[r].apply(null,arguments));return l.apply(null,e)}));return s.resultFunc=c,s.dependencies=o,s.recomputations=function(){return i},s.resetRecomputations=function(){return i=0},s}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,r=null,a=null;return function(){return v(t,r,arguments)||(a=e.apply(null,arguments)),r=arguments,a}}));var _=g([function(e){return e.catalog.categories},function(e){return e.activeFilters.category}],(function(e,t){var r=t.split("-").join(" ");return(e.find((function(e){return e.name.toLowerCase()===r}))||{}).id})),b=g([function(e){return e.catalog.helmets},_,function(e){return e.activeFilters.search.toLowerCase()}],(function(e,t,r){var a=e.filter((function(e){return e.title.toLowerCase().includes(r)}));return t&&(a=a.filter((function(e){return-1!==e.categories.indexOf(t)}))),a})),E=g([b],(function(e){var t={brand:[],color:[],size:[]};return e.map((function(e){-1===t.brand.indexOf(e.brand)&&t.brand.push(e.brand);for(var r=0;r<e.colors.length;r++)-1===t.color.indexOf(e.colors[r])&&t.color.push(e.colors[r]);for(var a=0;a<e.sizes.length;a++)-1===t.size.indexOf(e.sizes[a])&&t.size.push(e.sizes[a]);return t})),t})),y=g([b,function(e){return e.activeFilters.brand},function(e){return e.activeFilters.color},function(e){return e.activeFilters.size},function(e){return e.activeFilters.sort}],(function(e,t,r,a,n){var i=e;switch(0!==t.length&&(i=i.filter((function(e){return-1!==t.indexOf(e.brand)}))),0!==r.length&&(i=i.filter((function(e){for(var t=0;t<e.colors.length;t++)if(-1!==r.indexOf(e.colors[t]))return!0;return!1}))),0!==a.length&&(i=i.filter((function(e){for(var t=0;t<e.sizes.length;t++)if(-1!==a.indexOf(e.sizes[t]))return!0;return!1}))),n){case"titleASC":return i.sort((function(e,t){return e.title>t.title?1:-1}));case"titleDESC":return i.sort((function(e,t){return e.title<t.title?1:-1}));case"priceDESC":return i.sort((function(e,t){return t.price-e.price}));default:return i.sort((function(e,t){return e.price-t.price}))}})),F=r(32),N=r(33),C=r(16),k=(r(88),r(18)),S=r.n(k),z=(r(89),r(2)),O=function(e){var t=e.helmet,r=t.title,a=t.price,n=t.img.thumb,i=r.split(" ").join("-");return s.a.createElement("div",{className:"catalog__item"},s.a.createElement("div",{className:"catalog__item-cover"},s.a.createElement(z.b,{to:"/catalog/".concat(i)},s.a.createElement("img",{src:n,alt:"product-thumb"}))),s.a.createElement("div",{className:"catalog__item-details"},s.a.createElement(z.b,{to:"/catalog/".concat(i)},s.a.createElement("div",{className:"catalog__item-title"},r)),s.a.createElement("div",{className:"catalog__item-price price"},"$",a)),s.a.createElement(z.b,{to:"/catalog/".concat(i),className:"catalog__item-button button"},"Buy now"))},A=(r(90),r(66)),w=r(68),j=(r(91),function(e){var t=e.children,r=e.type,a=e.activeFilters,n=e.resetFilter;return s.a.createElement("div",{className:"filter__section"},s.a.createElement("div",{className:"filter__section-header"},s.a.createElement("div",{className:"filter__section-title title"},"".concat(r,"s")),a[r].length>0&&s.a.createElement("div",{className:"filter__section-reset link",onClick:function(){return n({type:r,value:"reset"})}},"Reset")),t)}),x=function(e){var t=e.filters,r=e.addProductFilter,a=e.activeFilters,n=e.setMobileSidebar,i=t.size,c=t.color,o=t.brand;return s.a.createElement("div",{className:"catalog__filter filter"},s.a.createElement(j,{type:"brand",activeFilters:a,resetFilter:r},s.a.createElement("div",{className:"brand"},o.map((function(e,t){var n=S()("brand__item",{brand__item_active:-1!==a.brand.indexOf(e)});return s.a.createElement("div",{key:t,className:n,onClick:function(){return r({type:"brand",value:e})}},e)})))),s.a.createElement(j,{type:"color",activeFilters:a,resetFilter:r},s.a.createElement(w.a,{items:c,selected:a.color,onClickFunction:function(e){return r({type:"color",value:e})}})),s.a.createElement(j,{type:"size",activeFilters:a,resetFilter:r},s.a.createElement(A.a,{items:i,selected:a.size,onClickFunction:function(e){return r({type:"size",value:e})}})),s.a.createElement("button",{className:"button filter__button",onClick:function(){return n("")}},"Filter"))},M=(r(92),function(e){var t=e.activeFilters,r=e.changeSortType,a=e.setMobileSidebar;return s.a.createElement("div",{className:"catalog__sort sort"},s.a.createElement("span",{className:"sort__title"},"sort by"),s.a.createElement("select",{className:"sort__select",value:t.sort,onChange:function(e){return r(e.target.value)}},s.a.createElement("option",{value:"priceASC"},"price, a-z"),s.a.createElement("option",{value:"priceDESC"},"price, z-a"),s.a.createElement("option",{value:"titleASC"},"name, a-z"),s.a.createElement("option",{value:"titleDESC"},"name, z-a")),s.a.createElement("button",{className:"sort__button button",onClick:function(){return a("sidebar_mobile")}},"Filters"))}),T=function(e){var t=e.helmets,r=e.filters,a=e.addProductFilter,n=e.activeFilters,i=e.changeSortType,c=e.showMore,o=Math.ceil(t.length/8),u=n.currentPage,m=Object(l.useState)(""),f=Object(C.a)(m,2),p=f[0],d=f[1],v=S()("catalog__sidebar sidebar ".concat(p));return s.a.createElement("div",{className:"catalog"},s.a.createElement("div",{className:v},s.a.createElement(x,{filters:r,activeFilters:n,addProductFilter:a,setMobileSidebar:d}),s.a.createElement("div",{className:"menu__close",onClick:function(){return d("")}})),s.a.createElement("div",{className:"catalog__content content"},s.a.createElement("div",{className:"catalog__top-block"},s.a.createElement("div",{className:"catalog__title"},n.search?"Results for '".concat(n.search,"'"):n.category?n.category.split("-").join(" "):"all helmets"),s.a.createElement(M,{activeFilters:n,changeSortType:i,setMobileSidebar:d})),s.a.createElement("div",{className:"catalog__list"},0===t.length?s.a.createElement("div",{className:"text-center"},"There is nothing! Try changing your search criteria."):t.slice(0,8*u).map((function(e){return s.a.createElement(O,{helmet:e,key:e.id})}))),u<o&&s.a.createElement("button",{onClick:c,className:"catalog__button button"},"show more")))},P=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchHelmets(),this.props.fetchCategories();var e=this.props.match.params.categoryName||"";this.props.fetchActiveCategory(e)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.categoryName!==e.match.params.categoryName&&this.props.fetchActiveCategory(this.props.match.params.categoryName||""),"/search"===e.location.pathname&&"/search"!==this.props.location.pathname&&this.props.clearSearch(),e.location.pathname!==this.props.location.pathname&&this.props.deleteAllFilters()}},{key:"componentWillUnmount",value:function(){this.props.clearSearch()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.isError,a=e.filters,n=e.addProductFilter,i=e.filteredHelmets,c=e.activeFilters,o=e.changeSortType,l=e.showMore,u=e.location.pathname;return t?s.a.createElement(F.a,null):r?s.a.createElement(N.a,null):s.a.createElement(T,{helmets:i,filters:a,addProductFilter:n,activeFilters:c,changeSortType:o,pathname:u,showMore:l})}}]),t}(l.Component),D={fetchHelmets:p.j,fetchCategories:p.h,fetchActiveCategory:p.g,addProductFilter:p.a,deleteAllFilters:p.e,changeSortType:p.c,clearSearch:p.d,showMore:p.m};t.default=Object(f.d)(m.f,Object(u.b)((function(e){var t=e.catalog;return{isLoading:t.isLoading,isError:t.isError,activeFilters:e.activeFilters,filteredHelmets:y(e),filters:E(e)}}),D))(P)},66:function(e,t,r){"use strict";var a=r(0),n=r.n(a),i=(r(67),r(18)),c=r.n(i);t.a=function(e){var t=e.items,r=e.selected,a=e.onClickFunction;return Array.isArray(r)||(r=[r]),n.a.createElement("div",{className:"size"},t.map((function(e,t){var i=c()("size__item",{size__item_active:-1!==r.indexOf(e)});return n.a.createElement("div",{key:t,className:i,"data-size":e,onClick:function(){return a(e)}},e)})))}},67:function(e,t,r){},68:function(e,t,r){"use strict";var a=r(0),n=r.n(a),i=r(18),c=r.n(i);r(69);t.a=function(e){var t=e.items,r=e.selected,a=e.onClickFunction;return Array.isArray(r)||(r=[r]),n.a.createElement("div",{className:"colors"},t.map((function(e,t){var i=c()("colors__item",{colors__item_active:-1!==r.indexOf(e)});return n.a.createElement("div",{"data-color":e,key:t,className:i,onClick:function(){return a(e)}})})))}},69:function(e,t,r){},88:function(e,t,r){},89:function(e,t,r){},90:function(e,t,r){},91:function(e,t,r){},92:function(e,t,r){}}]);
//# sourceMappingURL=5.872c0abe.chunk.js.map